var Movie=Backbone.Model.extend({defaults:{movie_title:"undefined",movie_poster:"undefined",critics_score:0,audience_score:0}}),Suggestion=Backbone.Model.extend({defaults:{movie_title:"",movie_year:1900,rt_id:0}}),MovieSuggestions=Backbone.Collection.extend({model:Suggestion}),AppView=Backbone.View.extend({el:"#appview",events:{"click .searchbtn":"search","keyup :input":"typeAhead","click #suggestwrap li":"pickMovie"},initialize:function(){console.log("init"),this.render()},render:function(){console.log("render")},search:function(){var e="http://api.rottentomatoes.com/api/public/v1.0/movies.json?apikey=fw8ehsfytpv4t2hvsx2tddxy&q=",t=this.$el.find("#searchbox").val();$.ajax({url:e+t+"&page_limit=6",dataType:"jsonp",success:function(e){console.log(e)}}),console.log(e+t)},typeAhead:function(e){var t=_.template($("#suggestions").html()),i=this,o="http://api.rottentomatoes.com/api/public/v1.0/movies.json?apikey=fw8ehsfytpv4t2hvsx2tddxy&q=",s=this.$el.find("#searchbox").val(),n=new MovieSuggestions;setTimeout(function(){$.ajax({url:o+s+"&page_limit=6",dataType:"jsonp",success:function(e){$("#suggestwrap").html(""),_.each(e.movies,function(e){n.add({movie_title:e.title,movie_year:e.year}),$("#suggestwrap").append(t({movie_title:e.title,movie_year:e.year,rt_id:e.id})),console.log(e)})}})},500)},pickMovie:function(e){var t=e.target.attributes[0].value,i=_.template($("#fullmovie").html());$.ajax({url:"http://api.rottentomatoes.com/api/public/v1.0/movies/"+t+".json?apikey=fw8ehsfytpv4t2hvsx2tddxy",dataType:"jsonp",success:function(e){$("#movieview").html(i({movie_title:e.title,movie_poster:e.posters.original,critics_score:e.ratings.critics_score,audience_score:e.ratings.audience_score}))}}),$("#suggestwrap").html("")}}),run=new AppView;